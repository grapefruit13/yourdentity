echo "pre-push husky script is running ^_^"

# Check if any files in the push are in the fe/ directory
if git diff --name-only HEAD~1 HEAD | grep -q "^fe/" || git diff --name-only origin/main...HEAD | grep -q "^fe/"; then
  echo "Frontend files detected in push, running build..."
  pnpm --dir "$(git rev-parse --show-toplevel)/fe" build
else
  echo "No frontend files in push, skipping build"
fi